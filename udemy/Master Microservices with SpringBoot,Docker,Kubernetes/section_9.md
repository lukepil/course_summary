[메인 페이지로 가기](main.md)

[이전 섹션으로 가기](section_8.md)

# Section 9 - Gateway, Routing & Cross-Cutting Concerns in Microservices

## 설명
이 섹션에서는 마이크로서비스 아키텍처에서 API 게이트웨이를 사용하여 클라이언트 요청을 처리하고, 서비스 간의 트래픽을 효율적으로 관리하는 방법을 설명합니다. Spring Cloud Gateway를 사용하여 모든 클라이언트 요청이 마이크로서비스에 전달되기 전에 게이트웨이를 거쳐 라우팅되며, 인증, 로깅, 모니터링과 같은 크로스-커팅(cross-cutting) 문제를 처리하는 방법을 다룹니다.

## 내용
 1. **Spring Cloud Gateway 설정**: Spring Cloud Gateway는 마이크로서비스 아키텍처에서 중앙 진입점 역할을 하며, 모든 클라이언트 요청이 게이트웨이를 통해 전달됩니다. 각 마이크로서비스는 직접 클라이언트 요청을 처리하지 않고, 게이트웨이가 요청을 적절한 서비스로 라우팅합니다. 게이트웨이는 요청을 분석한 후, 적절한 마이크로서비스로 해당 요청을 전달하는 방식으로 동작합니다. 예를 들어, api/users로 들어오는 요청은 사용자 서비스로 라우팅되고, api/orders는 주문 서비스로 라우팅됩니다.
 2. **필터 적용**: 게이트웨이에서는 요청에 대해 인증, 로깅, 권한 검사와 같은 공통 작업을 처리할 수 있습니다. JWT(JSON Web Token)를 사용한 인증 필터를 추가하여 각 요청이 유효한지 검증하거나, CORS(Cross-Origin Resource Sharing)를 처리하는 필터를 추가할 수 있습니다. 이를 통해 개별 서비스마다 중복된 보안 설정이나 로깅을 구현할 필요 없이, 게이트웨이에서 공통적으로 처리할 수 있습니다.
 3. **로드 밸런싱과 라우팅**: Spring Cloud Gateway는 요청을 여러 서비스 인스턴스에 분산시킬 수 있는 로드 밸런싱 기능을 지원합니다. 이를 통해 서비스에 과도한 트래픽이 몰리는 것을 방지하고, 부하를 균등하게 분배하여 시스템의 성능을 최적화할 수 있습니다. 라우팅 규칙은 동적으로 설정할 수 있어, 마이크로서비스가 확장되거나 새로운 인스턴스가 추가되었을 때도 요청이 적절히 분산됩니다.

## 결론
Spring Cloud Gateway는 마이크로서비스 아키텍처에서 클라이언트와 서비스 간의 요청을 관리하고, 크로스-커팅 문제를 중앙에서 처리할 수 있는 강력한 도구입니다. 이를 통해 트래픽을 효율적으로 관리하고, 인증, 로깅, 권한 관리 등의 공통 기능을 중앙 집중화할 수 있습니다.

[다음 섹션으로 가기](section_10.md)
