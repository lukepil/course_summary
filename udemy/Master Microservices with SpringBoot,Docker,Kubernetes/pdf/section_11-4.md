[메인 페이지로 가기](main.md)

[이전 섹션으로 가기](section_11-3.md)

# 이벤트 기반 마이크로서비스 및 Spring Cloud Function, Kafka, RabbitMQ 활용

## 설명:

이 문서에서는 이벤트 기반 마이크로서비스의 구조와 이를 지원하는 다양한 도구들을 다루고 있습니다. 이벤트 기반 아키텍처에서는 시스템 간의 통신이 비동기적으로 이루어지며, 퍼블리셔/구독자(Pub/Sub) 모델을 통해 서비스 간 의존성을 줄이고, 이벤트 브로커를 사용하여 이벤트를 관리합니다.

RabbitMQ와 Apache Kafka는 대표적인 이벤트 브로커로 소개되며, 이를 통해 이벤트 생성과 소비가 이루어집니다. RabbitMQ는 복잡한 라우팅과 메시지 브로커링에 특화된 도구이며, Apache Kafka는 대규모 데이터 스트리밍을 위한 분산형 플랫폼으로 설명됩니다. Kafka는 데이터를 **주제(Topics)**로 구분하고, **파티션(Partitions)**을 통해 데이터를 병렬로 처리하며, Producers는 Kafka에 메시지를 게시하고, Consumers는 메시지를 읽어 데이터를 처리하는 구조로 운영됩니다. Kafka의 **오프셋(Offsets)**은 메시지의 순서를 추적하며, Replication(복제) 기능을 통해 고가용성과 장애 복구가 보장됩니다.

Spring Cloud Function은 자바의 표준 함수 인터페이스를 활용하여 비즈니스 로직을 함수로 구현하는 방법을 제공하며, 이를 통해 서버리스(Serverless) 애플리케이션을 구축할 수 있습니다. Spring Cloud Function은 입력(Supplier), 변환(Function), 출력(Consumer)의 형태로 데이터를 처리하며, 서버리스 환경에서 각 함수가 독립적으로 실행될 수 있습니다. 이 구조는 AWS Lambda, Azure Functions 등 다양한 서버리스 플랫폼에 쉽게 통합될 수 있습니다.

또한, Spring Cloud Stream을 사용하여 함수 간 데이터 흐름을 관리하며, StreamBridge를 통해 이벤트를 생성하고, 이를 이벤트 브로커에 전달할 수 있습니다. 이를 통해 각 서비스는 비동기 통신을 통해 이벤트를 송신하고, 이벤트 브로커는 이를 적절한 구독자에게 전달합니다. application.yml 설정 파일에서는 각 함수의 바인딩을 설정하여 데이터 흐름을 정의합니다.

Kafka와 RabbitMQ 간의 차이점도 언급되며, Kafka는 대규모 스트리밍 데이터를 처리하는 데 최적화된 반면, RabbitMQ는 보다 복잡한 메시지 라우팅 요구 사항을 처리하는 데 적합합니다. Kafka는 고속 데이터 스트리밍을 지원하며, 특히 고가용성과 장애 복구 기능을 통해 안정적인 시스템 운영을 가능하게 합니다.

## 중요 부분:

 1. Spring Cloud Function: 비즈니스 로직을 자바 함수로 구현하여 독립적으로 실행할 수 있으며, 이를 통해 서버리스 환경에서 효율적인 서비스 확장을 지원합니다. 각 함수는 Supplier, Function, Consumer로 구성되며, 함수 조합을 통해 복잡한 로직을 처리할 수 있습니다.
 2. Kafka와 RabbitMQ의 역할: Kafka는 대규모 스트리밍 데이터 처리에 강점을 지닌 플랫폼으로, 대용량 데이터를 고속으로 처리하며, 분산형 아키텍처를 통해 데이터 복제를 지원합니다. 반면, RabbitMQ는 복잡한 라우팅과 메시지 브로커 역할에 적합하며, 여러 서비스 간의 비동기 통신을 관리합니다.
 3. StreamBridge와 Spring Cloud Stream: Spring Cloud Stream을 통해 이벤트 기반 데이터를 관리하고, StreamBridge를 사용하여 각 이벤트를 적절한 출력 바인딩으로 전달합니다. 이를 통해 서비스 간의 데이터를 효율적으로 주고받을 수 있습니다.

## 결론:

이 문서에서 다루는 이벤트 기반 마이크로서비스 아키텍처는 비동기 통신과 이벤트 브로커를 통해 시스템의 유연성과 확장성을 극대화합니다. Spring Cloud Function은 서버리스 환경에서 비즈니스 로직을 함수로 구현하는 효율적인 방식을 제공하며, Kafka와 RabbitMQ는 각각의 역할에 맞게 대규모 데이터 스트리밍 및 복잡한 메시지 라우팅을 처리할 수 있는 강력한 도구로 사용됩니다.

[다음 섹션으로 가기](section_12.md)
