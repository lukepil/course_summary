[메인 페이지로 가기](main.md)

[이전 섹션으로 가기](section_9.md)

# 마이크로서비스 보안(Security)

## 설명:

이 섹션에서는 마이크로서비스의 보안을 강화하기 위해 OAuth2/OpenID Connect와 Spring Security를 사용하는 방법을 다룹니다. 특히 OAuth2의 장점과 이를 통해 마이크로서비스의 인증(Authentication) 및 권한 부여(Authorization) 문제를 어떻게 해결할 수 있는지 설명합니다.

**기본 인증(Basic Authentication)**의 단점은 백엔드 서버와 인증/권한 부여 로직이 긴밀하게 결합되어 있다는 점입니다. 또한, 모바일 환경이나 REST API 사용 시 이러한 방식은 적절하지 않으며, 타사 클라이언트가 사용자의 정보를 접근하도록 허용하기 어려운 구조입니다.

OAuth2는 이를 해결하는 방법으로, **분리된 인증 서버(Authorization Server)**를 사용하여 인증과 권한 부여를 처리합니다. Google과 같은 플랫폼에서 동일한 계정을 다양한 서비스에서 사용할 수 있는 이유도 OAuth2 덕분입니다. OAuth2는 사용자 인증과 권한 부여를 클라이언트 애플리케이션과 백엔드 서비스로부터 분리하여 보안성을 강화합니다.

OAuth2 흐름에서는 사용자가 애플리케이션에 접근할 때, 요청이 KeyCloak과 같은 인증 서버로 전달되며, 성공적인 인증 후에 클라이언트는 엑세스 토큰을 받습니다. 이후 이 토큰을 통해 엣지 서버에서 요청이 검증되고, 권한이 부여된 후에 실제 마이크로서비스로 요청이 전달됩니다.

## 중요 부분:

 1. OAuth2의 장점: 다양한 애플리케이션 환경을 지원하며, 인증과 권한 부여를 중앙에서 관리하여 보안을 강화할 수 있습니다.
 2. 인증 서버를 사용하여 애플리케이션과 분리된 인증 구조를 만들어, 보안 위협을 최소화하고 관리할 수 있습니다.
 3. Spring Cloud Gateway에서 OAuth2 흐름을 통해 엑세스 토큰을 검증하고, 요청이 권한 있는 사용자만 접근할 수 있도록 합니다.

## 결론:

OAuth2는 마이크로서비스 환경에서 강력한 인증 및 권한 부여 메커니즘을 제공합니다. KeyCloak과 Spring Security와 같은 도구를 활용하면, 분리된 인증 서버를 통해 애플리케이션 보안을 강화하고, 사용자의 정보를 안전하게 보호할 수 있습니다.

[다음 섹션으로 가기](section_11.md)
