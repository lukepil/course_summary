[메인 페이지로 가기](main.md)

[이전 섹션으로 가기](section_2-1.md)

# 마이크로서비스 구축 단계 및 Strangler Fig 패턴

## 설명:

이 섹션에서는 마이크로서비스 구축 과정을 단계별로 설명하며, 특히 중요한 패턴인 Strangler Fig 패턴을 소개합니다.

마이크로서비스 구축의 첫 번째 단계는 필요한 데이터베이스 테이블을 생성하고, Spring Boot 애플리케이션을 설정하는 것입니다. Spring Boot 애플리케이션은 웹, JPA, H2 DB 등 필요한 의존성들을 포함하여 구성됩니다.

그 다음 단계에서는 **JPA(Entity 클래스 및 레포지토리)**와 DTO 클래스를 생성합니다. 이 때 DTO(Data Transfer Object) 패턴을 사용하여 데이터 계층과 애플리케이션 계층 간의 데이터 전송을 용이하게 합니다. DTO는 비즈니스 로직이 포함되지 않은 순수 데이터 전송용 객체로, 성능을 최적화하고 계층 간의 결합을 느슨하게 만듭니다.

마이크로서비스 구축의 세 번째 단계는 REST API를 구축하는 것입니다. 이 과정에서 @PostMapping, @GetMapping, @PutMapping, @DeleteMapping 등의 어노테이션을 사용하여 다양한 CRUD 연산을 지원하는 REST API를 생성합니다.

**글로벌 예외 처리(Global Exception Handling)**는 애플리케이션 전반에 걸쳐 발생하는 오류를 처리하기 위해 필수적입니다. 이 섹션에서는 애플리케이션의 예외 처리를 중앙에서 관리할 수 있도록 설정하는 방법이 설명됩니다.

또한 **데이터 유효성 검사(Data Validation)**도 중요한 단계로, 입력 데이터를 검증하는 과정을 설명합니다. @Valid, @Validated 같은 어노테이션을 사용하여 입력 데이터를 유효성 검증합니다.

마이크로서비스를 구축한 후, Spring Data JPA를 활용하여 데이터 변경 이력 및 감사를 수행하는 Auditing 기능도 구축합니다. 이를 통해 시스템의 데이터 변경 내역을 추적하고 관리할 수 있습니다.

또한, Swagger와 같은 도구를 사용해 REST API를 문서화하는 과정도 설명됩니다. 이는 @Schema, @Tag, @Operation 같은 어노테이션을 사용하여 API를 정의하고, 문서화하는 과정에서 중요한 역할을 합니다.

이후, 마이크로서비스 경계를 정의하는 과정이 설명됩니다. 마이크로서비스 경계를 정의하는 것은 성공적인 마이크로서비스 시스템 구축에서 가장 어려운 부분 중 하나로, 비즈니스 요구사항과 연관된 방식으로 서비스 경계를 설정하는 것이 핵심입니다.

마지막으로 소개되는 Strangler Fig 패턴은 기존 레거시 시스템을 새로운 시스템으로 점진적으로 대체하는 소프트웨어 마이그레이션 패턴입니다. 이 패턴은 기존 시스템을 완전히 중단하지 않고, 점진적으로 새로운 시스템을 도입해 나가는 방식으로, 마치 덩굴식물이 기존 나무를 감싸서 새로운 나무로 대체하는 것처럼 시스템을 교체합니다.

## 중요 부분:

	1.	Spring Boot를 사용한 마이크로서비스 구축 과정: 빈 Spring Boot 애플리케이션 생성, JPA 및 DTO 패턴 활용, REST API 구축, 예외 처리 및 데이터 유효성 검증.
	2.	Strangler Fig 패턴: 기존 레거시 시스템을 위험 없이 점진적으로 대체하는 방식으로, 모놀리식 시스템을 마이크로서비스 아키텍처로 변환하는 데 사용됩니다.
	3.	Swagger를 통한 REST API 문서화: API를 설계하고 명확히 문서화하여, 다른 개발자들이 쉽게 접근하고 이해할 수 있도록 도와줍니다.
	4.	마이크로서비스 경계 정의: 비즈니스 도메인과 밀접하게 연관된 방식으로 마이크로서비스 경계를 설정하는 것이 성공적인 시스템 구축의 핵심입니다.

## 결론:

마이크로서비스 구축은 단계별로 이루어지며, 각 과정에서 REST API 구축, 데이터 유효성 검사, 예외 처리, 그리고 API 문서화 등이 필수적입니다. Strangler Fig 패턴을 통해 기존 모놀리식 시스템을 점진적으로 새로운 마이크로서비스 아키텍처로 변환함으로써, 시스템 운영에 차질 없이 안정적으로 전환할 수 있습니다.

[다음 섹션으로 가기](section_3.md)
